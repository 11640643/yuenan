(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-14f017b6"],{"0bfb":function(e,t,i){"use strict";var n=i("cb7c");e.exports=function(){var e=n(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},3846:function(e,t,i){i("9e1e")&&"g"!=/./g.flags&&i("86cc").f(RegExp.prototype,"flags",{configurable:!0,get:i("0bfb")})},6837:function(e,t,i){},"6b54":function(e,t,i){"use strict";i("3846");var n=i("cb7c"),r=i("0bfb"),a=i("9e1e"),l="toString",s=/./[l],o=function(e){i("2aba")(RegExp.prototype,l,e,!0)};i("79e5")((function(){return"/a/b"!=s.call({source:"a",flags:"b"})}))?o((function(){var e=n(this);return"/".concat(e.source,"/","flags"in e?e.flags:!a&&e instanceof RegExp?r.call(e):void 0)})):s.name!=l&&o((function(){return s.call(this)}))},d798:function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-form",{ref:"validateForm",staticClass:"demo-dynamic",attrs:{model:e.form,"label-width":"120px"}},[i("el-row",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[e._l(e.form.list,(function(t,n){return[i("div",{key:t.day,staticClass:"row"},[i("el-form-item",{attrs:{label:"累计签到天数",prop:"list."+n+".day",rules:{required:!0,message:"累计签到天数不能为空",trigger:"change"}}},[i("el-input",{attrs:{placeholder:"请填写累计签到天数"},model:{value:t.day,callback:function(i){e.$set(t,"day",i)},expression:"item.day"}})],1),i("el-form-item",{attrs:{label:"奖励类型",prop:"list."+n+".type",rules:{required:!0,message:"请选择奖励类型",trigger:"change"}}},[i("el-select",{attrs:{placeholder:"请选择奖励类型"},model:{value:t.type,callback:function(i){e.$set(t,"type",i)},expression:"item.type"}},e._l(e.reward_type_list,(function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),i("el-form-item",{attrs:{label:"奖励值",prop:"list."+n+".value",rules:{required:!0,message:"奖励值不能为空",trigger:"change"}}},[i("el-input",{attrs:{placeholder:"请填写奖励值"},model:{value:t.value,callback:function(i){e.$set(t,"value",i)},expression:"item.value"}})],1),i("el-form-item",{staticClass:"delete"},[i("el-button",{directives:[{name:"show",rawName:"v-show",value:e.form.list.length>1,expression:"form.list.length > 1"}],on:{click:function(t){return t.preventDefault(),e.removeConfig(n)}}},[e._v("删除")]),i("el-button",{directives:[{name:"show",rawName:"v-show",value:e.form.list.length-1===n,expression:"form.list.length - 1 === index"}],on:{click:e.addConfig}},[e._v("添加")])],1)],1)]})),i("el-form-item",{attrs:{label:"签到规则"}},[i("el-input",{attrs:{type:"textarea",rows:4,placeholder:"请填写签到规则"},model:{value:e.form.sign_rule,callback:function(t){e.$set(e.form,"sign_rule",t)},expression:"form.sign_rule"}})],1),i("el-form-item",{attrs:{label:"签到背景图片"}},[i("el-upload",{attrs:{limit:1,action:"/api/api/upload?ssid="+e.ssid,"on-success":e.fileSuccess,"file-list":e.file,"list-type":"picture"}},[i("el-button",{attrs:{size:"small",type:"infor"}},[e._v("点击上传")]),i("div",{staticClass:"el-upload__tip",staticStyle:{color:"red"},attrs:{slot:"tip"},slot:"tip"},[e._v("\n          "+e._s(e.imageRemark)+"\n        ")])],1)],1),i("el-form-item",[i("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("validateForm")}}},[e._v("提交")])],1)],2)],1)},r=[],a=(i("ac6a"),i("456d"),i("6b54"),i("5c96")),l=i("1c1e"),s={sign_rule:"",list:[{value:"",type:"",day:"",key:Date.now()}],sign_bg:""},o="/sys/config/info",u="/sys/config/update";function c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(l["a"])(o,e)}function f(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(l["a"])(u,e)}function g(e){return"[object Object]"===Object.prototype.toString.call(e)}function d(e){return JSON.parse(JSON.stringify(e))}function p(e){return g(e)?Object.keys(e).map((function(t){return{label:e[t],value:t}})):[]}function m(e){var t=e.reward_set,i=e.sign_rule,n=e.sign_bg,r=d(s);return g(t)&&(r.list=Object.keys(t).map((function(e){return{value:t[e].value,type:t[e].type,day:e,key:Date.now()}}))),r.sign_rule=i,r.sign_bg=n,r}function v(e){var t=e.list,i=e.sign_rule,n=e.sign_bg,r={};return t.forEach((function(e){r[e.day]={type:e.type,value:e.value}})),{type:"sign_reward",sign_rule:i,reward_set:JSON.stringify(r),sign_bg:n}}var b={data:function(){return{loading:!1,form:d(s),reward_type_list:[],file:[],imageRemark:"尺寸:宽750px 高:914px 格式:png、jpg、jpeg、gif"}},computed:{ssid:function(){return localStorage.getItem("ssid")}},mounted:function(){var e=this;this.loading=!0,c({type:"sign_reward"}).then((function(t){if(t&&t.data){var i=t.data,n=i.sign_reward_type,r=i.reward_set,a=i.sign_rule,l=i.sign_bg;e.reward_type_list=p(n),e.form=m({reward_set:r,sign_rule:a,sign_bg:l})}})).finally((function(){return e.loading=!1}))},methods:{fileSuccess:function(e){this.form.sign_bg=e.data.file},submitForm:function(e){var t=this;this.loading=!0,this.$refs[e].validate((function(e){e?f(v(t.form)).then((function(){a["Message"].success("操作成功")})).finally((function(){return t.loading=!1})):t.loading=!1}))},addConfig:function(){this.form.list.push({value:"",type:"",day:"",key:Date.now()})},removeConfig:function(e){this.form.list.splice(e,1)}}},y=b,_=(i("efd7"),i("2877")),h=Object(_["a"])(y,n,r,!1,null,"2db0c6e6",null);t["default"]=h.exports},efd7:function(e,t,i){"use strict";var n=i("6837"),r=i.n(n);r.a}}]);
//# sourceMappingURL=chunk-14f017b6.4be91fb2.js.map